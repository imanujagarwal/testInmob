package com.inmobi.commons.core.f;

import android.content.ContentValues;
import com.inmobi.commons.core.d.c;
import java.util.ArrayList;
import java.util.Iterator;
import java.util.List;
import java.util.concurrent.TimeUnit;









public class a
  extends com.inmobi.commons.core.b.b
{
  private static final String a = a.class.getSimpleName();
  

















  public a()
  {
    com.inmobi.commons.core.d.b localB;
    















    (localB = com.inmobi.commons.core.d.b.a()).a("trc", "(id INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, eventId TEXT NOT NULL, adMarkup TEXT NOT NULL, eventName TEXT NOT NULL, imPlid INTEGER NOT NULL, requestId TEXT NOT NULL, eventType TEXT NOT NULL, dNettypeRaw TEXT NOT NULL, ts TEXT NOT NULL, adtype TEXT NOT NULL, timestamp TEXT NOT NULL)");
    localB.b();
  }
  







  public static List<b> a(int paramInt, String paramString)
  {
    Object localObject;
    






    paramInt = (localObject = com.inmobi.commons.core.d.b.a()).a("trc", null, "adtype=?", new String[] { paramString }, null, null, "timestamp ASC", String.valueOf(paramInt));
    ((com.inmobi.commons.core.d.b)localObject).b();
    paramString = new ArrayList();
    for (paramInt = paramInt.iterator(); paramInt.hasNext();) { localObject = (ContentValues)paramInt.next();
      paramString.add(b.a((ContentValues)localObject));
    }
    return paramString;
  }
  
  public final boolean a(long paramLong, String paramString)
  {
    paramString = a(1, paramString);
    boolean bool = false;
    if ((paramString.size() > 0) && 
      (TimeUnit.MILLISECONDS.toSeconds(System.currentTimeMillis() - 
      




























































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































      get0i) > paramLong)) {
      bool = true;
    }
    
    return bool;
  }
  
  public static boolean c(String paramString)
  {
    com.inmobi.commons.core.d.b localB;
    paramString = (localB = com.inmobi.commons.core.d.b.a()).b("trc", "adtype=?", new String[] { paramString });
    localB.b();
    return paramString > 0;
  }
  

  public static void d(String paramString)
  {
    com.inmobi.commons.core.d.b localB;
    if (!(paramString = (localB = com.inmobi.commons.core.d.b.a()).a("trc", null, "adtype=?", new String[] { paramString }, null, null, "timestamp ASC", "1")).isEmpty())
    {
      paramString = ((ContentValues)paramString.get(0)).getAsString("id");
      
      localB.a("trc", "id IN (" + paramString + ")", null);
    }
    
    localB.b();
  }
  

  public final void a(List<Integer> paramList)
  {
    if (paramList.isEmpty()) {
      return;
    }
    com.inmobi.commons.core.d.b localB = com.inmobi.commons.core.d.b.a();
    StringBuffer localStringBuffer = new StringBuffer("");
    for (int i = 0; i < paramList.size() - 1; i++) {
      localStringBuffer.append(paramList.get(i)).append(",");
    }
    localStringBuffer.append(String.valueOf(paramList.get(paramList.size() - 1)));
    
    localB.a("trc", "id IN (" + localStringBuffer + ")", null);
    localB.b();
  }
  

  public final int a(String paramString)
  {
    com.inmobi.commons.core.d.b localB;
    paramString = (localB = com.inmobi.commons.core.d.b.a()).b("trc", "adtype=?", new String[] { paramString });
    localB.b();
    return paramString;
  }
  
  public final int b(long paramLong, String paramString)
  {
    com.inmobi.commons.core.d.b localB = com.inmobi.commons.core.d.b.a();
    long l = System.currentTimeMillis() - paramLong * 1000L;
    
    paramLong = localB.a("trc", "ts<? and adtype=?", new String[] { String.valueOf(l), paramString });
    new StringBuilder("Deleted ").append(paramLong).append(" expired events from trc DB");
    localB.b();
    return paramLong;
  }
  
  public final String b(int paramInt)
  {
    com.inmobi.commons.core.d.b localB;
    paramInt = (localB = com.inmobi.commons.core.d.b.a()).a("trc", null, "id=?", new String[] { String.valueOf(paramInt) }, null, null, "timestamp ASC", "1");
    localB.b();
    if (!paramInt.isEmpty()) {
      return 
      
























































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































        aget0j;
    }
    return null;
  }
  


  private static String e(String paramString)
  {
    int i = -1; switch (paramString.hashCode()) {case -1396342996:  if (paramString.equals("banner")) i = 0; break; case 104431:  if (paramString.equals("int")) i = 1; break; case -1052618729:  if (paramString.equals("native")) i = 2; break; } switch (i) {
    case 0: 
      paramString = "trc_last_banner_batch_process";
      break;
    case 1: 
      paramString = "trc_last_int_batch_process";
      break;
    
    default: 
      paramString = "trc_last_native_batch_process";
    }
    
    return paramString;
  }
  
  public final void c(long paramLong, String paramString)
  {
    paramString = e(paramString);
    if (com.inmobi.commons.a.a.a()) {
      c.b("batch_processing_info").a(paramString, paramLong);
    }
  }
  
  public final long b(String paramString)
  {
    paramString = e(paramString);
    if (com.inmobi.commons.a.a.a()) {
      return c.b("batch_processing_info").b(paramString, -1L);
    }
    return -1L;
  }
  








































































































































































































































































































  public static void a(b paramB)
  {
    com.inmobi.commons.core.d.b localB;
    







































































































































































































































































































    ContentValues localContentValues;
    






































































































































































































































































































    (localContentValues = new ContentValues()).put("eventId", 
    












































































































































































































































































































































































































































































































































































































































































































































































































































































































































































      b);localContentValues.put("adMarkup", 
    


      c);localContentValues.put("eventName", 
    


      d);localContentValues.put("imPlid", Long.valueOf(
    


      e));localContentValues.put("requestId", 
    


      f);localContentValues.put("eventType", 
    


      g);localContentValues.put("dNettypeRaw", 
    


      h);localContentValues.put("ts", String.valueOf(
    


      i));localContentValues.put("adtype", 
    


      j);localContentValues.put("timestamp", String.valueOf(
    


      k));(localB = com.inmobi.commons.core.d.b.a()).a("trc", localContentValues);localB.b();
  }
}
